---
title: Git 基本技巧
date: 2019-08-22
category: writing
---

超简单 Git 基本技巧。

### 刚才一不小心提交错分支了，怎么办？

常常有这种情况，本来是在测试分支上审查代码，找到了 bug，然后就在该分支上改代码，忘了切换到开发分支，因失误将代码提交到了测试分支。提交错了分支，可以利用 git 的版本控制进行撤销。

```bash
$ git reset HEAD~
```

### 提交信息拼写错误，需要修改后重新提交，怎么办？

在当前分支提交然后发现提交信息有拼写错误，修改刚刚已经提交的提交信息可以用下面的命令。

```bash
$ git commit --amend -m "this is new message"
```

### 分支之间来回切换好麻烦呀，有没有什么简单点的切换方法？

假设在当前在开发分支上，现在想将开发分支的代码合并进测试分支，于是先切换到测试分支，然后将开发分支合并进来，只是合并好以后还想切换回开发分支，有一个来回切换分支比较好用的命令。

```bash
$ git checkout -
```

`-`同样适用于目录的切换。

### 合并分支时合并了一半，代码出现了严重的冲突，我现在不想解决冲突然后再合并了，想退回之前的状态，有什么好办法？

中断合并过程，可以用`merge`子命令的`abort`选项。

```bash
$ git merge --abort
```

### 我不确定我之前提交的内容是不是有问题，怎么看最近几次的改动内容？

可以通过 `git diff` 命令查看改动的内容和当前的内容的对比。例如，

```bash
$ git diff HEAD~~~
```

当前的状态为 HEAD，查看几次提交前的提交就在 HEAD 后加上几个`~`。

### 我只想查看某个具体的文件的某次提交和最新的状态的改动，怎么做？

假设查看文件`./foo.js`的改动，比照前两次提交和最新的状态，

```bash
$ git diff HEAD~~ -- ./foo.js
```

### 我想把别的分支的某个文件同步到当前分支，应该用什么命令？

假设分支名为 fix, 当前所在分支为 dev-1，那么，将分支 fix 里面有最新状态的文件 ./foo.js 同步过来的命令是，

```bash
$ git checkout fix -- ./foo.js
```

### 在当前分支写了一半，需要临时切换一下分支？

在当前分支写了一半，需要临时切换一下分支，已经编辑过的文件是被 git 跟踪版本记录的(已 commit 过)，因而切换会导致冲突，但我因为担心错误现在还不打算提交，我应该怎么做才能切换？

假设待切换的分支名为 dev-1，那么切换过去应该用

```bash
$ git stash
$ git checkout dev-1
```

切换回，应该用

```bash
$ git checkout -
$ git stash pop
```
